# Contrast Ratio Report

This Report was generated by the WCAG Checker on {{json_data.timestamp}}.    
In total, {{json_data.total_urls}} Pages were analysed with a base URL of {{json_data.base_url}}.

The following report contains the results of the contrast ratio check for each Page and Elements selected.

_HINT:_ The Tool silently opens a Browser window, select the elements (you configured) and take screenshots of them.        
Using these screenshots, the three most prominent colors are identified,
and their contrast ratios are calculated and evaluated against the WCAG 2.1 AA standard.

The contrast ratio is calculated using the formula:    
<small>(where R, G, and B are the normalized RGB values (0-1))</small>
```plaintext
  L = 0.2126 * R + 0.7152 * G + 0.0722 * B
```

An overview Screenshot of the selected elements is provided for each Page.
The elements are outlined in the screenshot with an index number tag for better identification.

Each element is identified by an CSS Path expression, which can be used to locate the element in the DOM.    
<small>(The CSS Path expression is generated by the tool and may not be 100% accurate.)</small>

The tool also provides a screenshot of the element for better visualization. As well as the text content of the element, if available.    
Each element shows a table with the used colors, the contrast ratio and if it meets the WCAG requirements.    
If applicable, the tool also provides color suggestions that meet the WCAG contrast ratio requirements.

## Configuration
- **Mode:** {{config.mode}}
- **Contrast Threshold:** {{config.contrast_threshold}}
- **Selector:** `{{config.selector}}`
- **Alternate Color Suggestion:** {{"Enabled" if config.alternate_color_suggestion else "Disabled"}}
- **Use Canny Edge Detection:** {{"Enabled" if config.use_canny_edge_detection else "Disabled"}}
- **Use Antialias:** {{"Enabled" if config.use_antialias else "Disabled"}}
- **Report Level:** {{config.report_level}}
- **Base Resolution:** {{config.resolution_width}}x{{config.resolution_height}}

## Results
There are {{json_data.total_urls}} pages in total.

**Page Overview:**  
{% for url_data in json_data.urls -%}
- [{{ url_data.index }}: {{ url_data.title if url_data.title else "URL " ~ url_data.index }}](#url-{{url_data.index}})  ({{ url_data.results | count_violations }} violations)
{% endfor %}

{% for url_data in json_data.urls -%}
<a name="url-{{url_data.index}}"></a>
### Page ({{url_data.index}} / {{json_data.total_urls}}):
{% if url_data.url %}
[Link to url]({{url_data.url}})
{{url_data.url}}
{% endif %}
{% if url_data.title %}
**Title:** {{ url_data.title }}
{% endif %}
**Violations count for this URL:** {{ url_data.results | count_violations }}

{% if url_data.index > 1 -%}
[⬅️ Prev ({{url_data.index - 1}})](#url-{{url_data.index - 1}})
{%- endif -%}
{%- if url_data.index < json_data.total_urls -%}
{%- if url_data.index > 1 %} | {% endif -%}
[Next ({{url_data.index + 1}}) ➡️](#url-{{url_data.index + 1}})
{%- endif %}


![Full Page Screenshot with Outlines]({{url_data.get('screenshot_outline','').replace(output + '/', '')}})

{%- for result in url_data.results -%}
<a name='el_{{url_data.index}} 0_{{result.element_index}}'></a>
#### {{result.element_index}}. Element of Page {{url_data.index}}
{%- if "error" in result -%}
- **Error:** {{ result.error }}
  {%- else -%}
  {%- set wcag_status = "✅ *Valid*" if result.meets_wcag else "❌ **Not Valid**" -%}
  {%- set color_spans = result.colors | join_color_span -%}
  {%- if result.element_text -%}
  {%- set element_text = "**Text:**\n```plaintext\n" + result.element_text | e + "\n```\n" -%}
  {%- else -%}
  {%- set element_text = "" -%}
  {%- endif %}
  | index | colors | contrast ratio | meets wcag |
  |-------|--------|----------------|------------|
  | {{ result.element_index }} | {{ color_spans }} | {{ "%.2f"|format(result.contrast_ratio) }} | {{ wcag_status }} |

**CSS Path:** `{{ result.element_path }}`

{{ element_text }}

{%- set suggestions = result.color_suggestions -%}
{%- if suggestions -%}
**Color Suggestions:** (that meets WCAG)

| Color 1 | Color 2 | Contrast |
|---------|---------|----------|
{% for suggestion in suggestions -%}
{%- set colors = suggestion.colors if suggestion.colors else [] -%}
{%- if colors|length == 2 -%}
{%- set color1, color2 = colors -%}
| {{ color1 | create_color_span }} | {{ color2 | create_color_span }} | {{ "%.2f"|format(suggestion.contrast) if suggestion.contrast is not none else "N/A" }} |
{% endif -%}
{%- endfor -%}
{%- endif %}

**Image reference:**

![Element Screenshot]({{result.screenshot.replace(output + '/', '')}})
{% endif %}
---

{% endfor -%}
{% endfor -%}
